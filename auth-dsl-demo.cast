{"version": 2, "width": 99, "height": 37, "timestamp": 1752642468, "env": {"SHELL": "/bin/bash", "TERM": "xterm-256color"}, "title": "Auth DSL - Complete CLI Demo"}
[0.003515, "o", "🚀 Auth DSL - Define auth once. Use it anywhere.\r\n==============================================\r\n\r\n"]
[2.004732, "o", "📖 First, let's explore the CLI interface:\r\n$ auth-dsl --help\r\n"]
[2.0468, "o", "\u001b[0m\r\n\u001b[33mWarning:\u001b[0m nix (Nix) 2.24.11 is on the PATH (at \u001b[36m/usr/bin/nix\u001b[0m) but Stack's Nix integration is\r\n         disabled. To mute this message in future, set \u001b[95mnotify-if-nix-on-path: false\u001b[0m in Stack's\r\n         configuration.\r\n         \u001b[0m\r\n"]
[2.25336, "o", "\u001b[0mSpecified file \"CHANGELOG.md\" for extra-source-files does not exist\u001b[0m\r\n"]
[2.332222, "o", "auth-dsl - Domain-specific language for authentication systems\r\n\r\nUsage: auth-dsl COMMAND\r\n\r\n  Auth DSL - Define auth once. Use it anywhere.\r\n\r\nAvailable options:\r\n  -h,--help                Show this help text\r\n"]
[2.332401, "o", "\r\nAvailable commands:\r\n  init                     Initialize a new auth.dl file\r\n  serve                    Start the authentication server\r\n  compile                  Generate code for target languages\r\n  build                    Build SDKs and artifacts\r\n"]
[5.342461, "o", "\r\n🔍 Let's see the available commands:\r\n\r\nAvailable commands:\r\n  • init     - Initialize a new auth.dl file\r\n  • serve    - Start the authentication server\r\n"]
[5.342975, "o", "  • compile  - Generate code for target languages\r\n  • build    - Build SDKs and artifacts\r\n\r\n"]
[10.345704, "o", "📝 Let's start by creating a new auth configuration...\r\n"]
[12.347108, "o", "$ auth-dsl init --path demo-auth.dl\r\n"]
[12.38319, "o", "\u001b[0m\r\n\u001b[33mWarning:\u001b[0m nix (Nix) 2.24.11 is on the PATH (at \u001b[36m/usr/bin/nix\u001b[0m) but Stack's Nix integration is\r\n         disabled. To mute this message in future, set \u001b[95mnotify-if-nix-on-path: false\u001b[0m in Stack's\r\n         configuration.\r\n         \u001b[0m\r\n"]
[12.528403, "o", "\u001b[0mSpecified file \"CHANGELOG.md\" for extra-source-files does not exist\u001b[0m\r\n"]
[12.597895, "o", "Created auth.dl template at demo-auth.dl\r\n"]
[14.607593, "o", "\r\n📋 Let's examine the generated configuration:\r\n$ cat demo-auth.dl\r\n"]
[14.608673, "o", "// Auth DSL Configuration\r\n\r\nprovider google {\r\n  client_id = \"${GOOGLE_CLIENT_ID}\"\r\n  client_secret = \"${GOOGLE_CLIENT_SECRET}\"\r\n  scopes = [\"email\", \"profile\"]\r\n}\r\n\r\nprovider password {\r\n  min_length = 8\r\n  require_special = true\r\n  require_numbers = true\r\n  require_uppercase = true\r\n}\r\n\r\nsession {\r\n  strategy = \"jwt\"\r\n  expiration = \"1h\"\r\n  secure = true\r\n}\r\n\r\ndatabase {\r\n  type = \"sqlite\"\r\n  connection = \"auth.db\"\r\n}\r\n\r\nprotect \"/api/admin\" {\r\n  roles = [\"admin\"]\r\n}\r\n"]
[17.610718, "o", "\r\n🔧 Now let's compile this configuration to TypeScript:\r\n$ auth-dsl compile --config demo-auth.dl --lang typescript --output demo-output\r\n"]
[17.655261, "o", "\u001b[0m\r\n\u001b[33mWarning:\u001b[0m nix (Nix) 2.24.11 is on the PATH (at \u001b[36m/usr/bin/nix\u001b[0m) but Stack's Nix integration is\r\n         disabled. To mute this message in future, set \u001b[95mnotify-if-nix-on-path: false\u001b[0m in Stack's\r\n         configuration.\r\n         \u001b[0m\r\n"]
[17.974193, "o", "\u001b[0mSpecified file \"CHANGELOG.md\" for extra-source-files does not exist\u001b[0m\r\n"]
[18.086076, "o", "🔧 Compiling auth configuration...\r\n"]
[18.087853, "o", "📝 Generating code for languages: [\"typescript\"]\r\n📁 Output directory: demo-output\r\n"]
[18.088007, "o", "  🔨 Generating typescript code...\r\n"]
[18.089028, "o", "    ✓ Generated TypeScript client\r\n✅ Code generation completed successfully!\r\n📂 Generated files are in: demo-output\r\n"]
[20.097413, "o", "\r\n📂 Let's see what was generated:\r\n$ ls -la demo-output/typescript/\r\n"]
[20.09917, "o", "total 176\r\ndrwxrwxr-x   3 senthilnathan senthilnathan   4096 Jul 16 10:32 .\r\ndrwxrwxr-x   3 senthilnathan senthilnathan   4096 Jul 16 10:31 ..\r\n-rw-rw-r--   1 senthilnathan senthilnathan   7008 Jul 16 10:38 auth.ts\r\ndrwxrwxr-x 220 senthilnathan senthilnathan  12288 Jul 16 10:32 node_modules\r\n-rw-rw-r--   1 senthilnathan senthilnathan    405 Jul 16 10:38 package.json\r\n-rw-rw-r--   1 senthilnathan senthilnathan 141169 Jul 16 10:32 package-lock.json\r\n-rw-rw-r--   1 senthilnathan senthilnathan   1125 Jul 16 10:38 types.ts\r\n"]
[22.100876, "o", "\r\n📄 Let's examine the generated TypeScript client:\r\n$ head -30 demo-output/typescript/auth.ts\r\n"]
[22.103841, "o", "// Generated TypeScript Auth Code\r\n// Auto-generated from auth.dl configuration\r\n\r\nimport axios, { AxiosInstance, AxiosResponse } from 'axios';\r\n\r\n// Type definitions generated from auth.dl configuration\r\n\r\nexport interface UserInfo {\r\n  id: string;\r\n  email: string;\r\n  name?: string;\r\n  avatar?: string;\r\n  roles: string[];\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface UserSession {\r\n  id: string;\r\n  userId: string;\r\n  expiresAt: string;\r\n  scopes: string[];\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  user: UserInfo;\r\n  token: string;\r\n  refreshToken?: string;\r\n  expiresAt?: string;\r\n}\r\n"]
[25.105458, "o", "\r\n📦 And the package.json with dependencies:\r\n$ cat demo-output/typescript/package.json\r\n"]
[25.106478, "o", "{\r\n  \"name\": \"auth-dsl-client\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"Generated TypeScript client for Auth DSL\",\r\n  \"main\": \"auth.js\",\r\n  \"types\": \"types.d.ts\",\r\n  \"scripts\": {\r\n    \"build\": \"tsc\",\r\n    \"test\": \"jest\"\r\n  },\r\n  \"dependencies\": {\r\n    \"axios\": \"^1.0.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"typescript\": \"^4.9.0\",\r\n    \"@types/node\": \"^18.0.0\",\r\n    \"jest\": \"^29.0.0\",\r\n    \"@types/jest\": \"^29.0.0\"\r\n  }\r\n}\r\n"]
[27.107972, "o", "\r\n🔍 Let's look at the type definitions:\r\n$ head -20 demo-output/typescript/types.ts\r\n"]
[27.109277, "o", "// Type definitions generated from auth.dl configuration\r\n\r\nexport interface UserInfo {\r\n  id: string;\r\n  email: string;\r\n  name?: string;\r\n  avatar?: string;\r\n  roles: string[];\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface UserSession {\r\n  id: string;\r\n  userId: string;\r\n"]
[27.109321, "o", "  expiresAt: string;\r\n  scopes: string[];\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface AuthResponse {\r\n"]
[29.11096, "o", "\r\n✅ Let's verify the TypeScript code compiles correctly:\r\n$ cd demo-output/typescript && npm install\r\n"]
[32.068879, "o", "$ npx tsc --noEmit --strict auth.ts\r\n"]
[32.338629, "o", "\u001b[1G"]
[32.338783, "o", "\u001b[0K"]
[37.278333, "o", "\u001b[1G\u001b[0K⠙"]
[37.280494, "o", "\u001b[1G\u001b[0K"]
[37.288476, "o", "✅ TypeScript compilation successful!\r\n"]
[39.289998, "o", "\r\n🏗️  Now let's build a complete SDK package:\r\n$ auth-dsl build --config demo-auth.dl --output demo-build\r\n"]
[39.337523, "o", "\u001b[0m\r\n\u001b[33mWarning:\u001b[0m nix (Nix) 2.24.11 is on the PATH (at \u001b[36m/usr/bin/nix\u001b[0m) but Stack's Nix integration is\r\n         disabled. To mute this message in future, set \u001b[95mnotify-if-nix-on-path: false\u001b[0m in Stack's\r\n         configuration.\r\n         \u001b[0m\r\n"]
[39.681309, "o", "\u001b[0mSpecified file \"CHANGELOG.md\" for extra-source-files does not exist\u001b[0m\r\n"]
[39.820137, "o", "🏗️  Building SDKs and artifacts...\r\n"]
[39.823283, "o", "📁 Build output directory: demo-build\r\n"]
[39.82341, "o", "📦 Building SDKs...\r\n  🔨 Building typescript SDK...\r\n"]
[39.824247, "o", "    ✓ Generated TypeScript SDK\r\n"]
[39.824316, "o", "  🔨 Building python SDK...\r\n"]
[39.825036, "o", "    ✓ Generated Python SDK"]
[39.82598, "o", "\r\n  🔨 Building go SDK...\r\n"]
[39.826114, "o", "    ✓ Generated Go SDK\r\n"]
[39.826197, "o", "📋 Building OpenAPI specification...\r\n"]
[39.826591, "o", "    ✓ Generated OpenAPI specification\r\n"]
[39.826648, "o", "🔧 Building middleware templates...\r\n"]
[39.827217, "o", "    ✓ Generated middleware templates\r\n"]
[39.827311, "o", "✅ Build completed successfully!\r\n📂 Build artifacts are in: demo-build\r\n📋 Generated artifacts:\r\n   • TypeScript SDK\r\n   • Python SDK\r\n   • Go SDK\r\n   • OpenAPI specification\r\n   • Middleware templates\r\n"]
[41.839523, "o", "\r\n📦 Let's see what was built:\r\n$ tree demo-build/ -L 3\r\n"]
[41.840637, "o", "\u001b[01;34mdemo-build/\u001b[0m\r\n├── \u001b[01;34mmiddleware\u001b[0m\r\n│   ├── express.js\r\n│   ├── fastapi.py\r\n│   └── gin.go\r\n├── openapi.yaml\r\n└── \u001b[01;34msdks\u001b[0m\r\n    ├── \u001b[01;34mgo\u001b[0m\r\n"]
[41.840738, "o", "    │   ├── auth.go\r\n    │   ├── go.mod\r\n    │   └── README.md\r\n    ├── \u001b[01;34mpython\u001b[0m\r\n    │   ├── __init__.py\r\n    │   ├── README.md\r\n    │   └── setup.py\r\n    └── \u001b[01;34mtypescript\u001b[0m\r\n        ├── index.ts\r\n        ├── package.json\r\n"]
[41.84081, "o", "        └── README.md\r\n\r\n5 directories, 13 files\r\n"]
[43.842338, "o", "\r\n🎯 Let's test with a different configuration - cookie-based sessions:\r\n"]
[43.843555, "o", "$ cat cookie-auth.dl\r\n"]
[43.844841, "o", "// Cookie-based Auth Configuration\r\n\r\nprovider google {\r\n  client_id = \"${GOOGLE_CLIENT_ID}\"\r\n  client_secret = \"${GOOGLE_CLIENT_SECRET}\"\r\n  scopes = [\"email\", \"profile\"]\r\n}\r\n\r\nsession {\r\n  strategy = \"cookie\"\r\n  expiration = \"24h\"\r\n  secure = true\r\n}\r\n\r\ndatabase {\r\n  type = \"sqlite\"\r\n  connection = \"auth.db\"\r\n}\r\n\r\nprotect \"/api/admin\" {\r\n  roles = [\"admin\"]\r\n}\r\n"]
[45.846673, "o", "\r\n$ auth-dsl compile --config cookie-auth.dl --lang typescript --output cookie-output\r\n"]
[45.875983, "o", "\u001b[0m\r\n\u001b[33mWarning:\u001b[0m nix (Nix) 2.24.11 is on the PATH (at \u001b[36m/usr/bin/nix\u001b[0m) but Stack's Nix integration is\r\n         disabled. To mute this message in future, set \u001b[95mnotify-if-nix-on-path: false\u001b[0m in Stack's\r\n         configuration.\r\n         \u001b[0m\r\n"]
[46.023252, "o", "\u001b[0mSpecified file \"CHANGELOG.md\" for extra-source-files does not exist\u001b[0m\r\n"]
[46.083549, "o", "🔧 Compiling auth configuration...\r\n"]
[46.084535, "o", "📝 Generating code for languages: [\"typescript\"]\r\n📁 Output directory: cookie-output\r\n"]
[46.084591, "o", "  🔨 Generating typescript code...\r\n"]
[46.085345, "o", "    ✓ Generated TypeScript client\r\n"]
[46.085352, "o", "✅ Code generation completed successfully!\r\n"]
[46.085393, "o", "📂 Generated files are in: cookie-output\r\n"]
[47.094223, "o", "\r\n🍪 Notice the different session methods for cookie-based auth:\r\n$ grep -A 10 'Cookie session management' cookie-output/typescript/auth.ts\r\n"]
[47.096237, "o", "  // Cookie session management\r\n  async validateSession(): Promise<boolean> {\r\n    try {\r\n      const session = await this.getSession();\r\n      if (session) {\r\n        this.authState.isAuthenticated = true;\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n"]
[50.097753, "o", "\r\n🧪 Let's run the test suite to ensure everything works:\r\n$ stack test --fast\r\n"]
[51.010239, "o", "\u001b[?25l\r\n"]
[51.010547, "o", "AuthDSL.Parser\r\n"]
[51.01063, "o", "  Basic parsing\r\n"]
[51.010702, "o", "    parses empty configuration [ ]"]
[51.011649, "o", "\r                                  \r    parses empty configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.011901, "o", "    parses configuration with comments [ ]"]
[51.012153, "o", "\r                                          \r    parses configuration with comments [\u001b[32m✔\u001b[0m]\r\n"]
[51.012495, "o", "    parses single provider block [ ]"]
[51.012678, "o", "\r                                    \r    parses single provider block [\u001b[32m✔\u001b[0m]\r\n"]
[51.012803, "o", "    parses multiple blocks [ ]"]
[51.013338, "o", "\r                              \r    parses multiple blocks [\u001b[32m✔\u001b[0m]\r\n"]
[51.01344, "o", "  Whitespace handling\r\n"]
[51.013489, "o", "    handles various whitespace patterns [ ]"]
[51.033234, "o", "\r                                           \r    handles various whitespace patterns [\u001b[32m✔\u001b[0m]\r\n      +++ OK, passed 100 tests.\r\n"]
[51.03355, "o", "  Block structure\r\n    requires proper block syntax [ ]"]
[51.039436, "o", "\r                                    \r    requires proper block syntax [\u001b[32m✔\u001b[0m]\r\n      +++ OK, passed 100 tests.\r\n"]
[51.039659, "o", "  Provider parsing\r\n    parses Google OAuth2 provider with required fields [ ]"]
[51.039979, "o", "\r                                                          \r    parses Google OAuth2 provider with required fields [\u001b[32m✔\u001b[0m]\r\n"]
[51.040072, "o", "    parses Google OAuth2 provider with optional fields [ ]"]
[51.040589, "o", "\r                                                          \r    parses Google OAuth2 provider with optional fields [\u001b[32m✔\u001b[0m]\r\n"]
[51.040666, "o", "    parses password authentication provider with defaults [ ]"]
[51.040777, "o", "\r                                                             \r    parses password authentication provider with defaults [\u001b[32m✔\u001b[0m]\r\n"]
[51.04083, "o", "    parses password authentication provider with custom settings [ ]"]
[51.041409, "o", "\r                                                                    \r    parses password authentication provider with custom settings [\u001b[32m✔\u001b[0m]\r\n"]
[51.041423, "o", "    fails to parse Google provider without required fields [ ]"]
[51.041536, "o", "\r                                                              \r    fails to parse Google provider without required fields [\u001b[32m✔\u001b[0m]\r\n"]
[51.041601, "o", "    fails to parse unknown provider type [ ]"]
[51.041852, "o", "\r                                            \r    fails to parse unknown provider type [\u001b[32m✔\u001b[0m]\r\n"]
[51.041926, "o", "  Session parsing\r\n"]
[51.041981, "o", "    parses session block with JWT strategy [ ]"]
[51.04236, "o", "\r                                              \r    parses session block with JWT strategy [\u001b[32m✔\u001b[0m]\r\n"]
[51.042413, "o", "    parses session block with Cookie strategy [ ]"]
[51.042648, "o", "\r                                                 \r    parses session block with Cookie strategy [\u001b[32m✔\u001b[0m]\r\n"]
[51.042691, "o", "    parses session block with defaults [ ]"]
[51.042857, "o", "\r                                          \r    parses session block with defaults [\u001b[32m✔\u001b[0m]\r\n"]
[51.042925, "o", "  Database parsing\r\n"]
[51.042984, "o", "    parses database block with SQLite [ ]"]
[51.043221, "o", "\r                                         \r    parses database block with SQLite [\u001b[32m✔\u001b[0m]\r\n    parses database block with PostgreSQL [ ]"]
[51.043714, "o", "\r                                             \r    parses database block with PostgreSQL [\u001b[32m✔\u001b[0m]\r\n    parses database block with Supabase [ ]"]
[51.044207, "o", "\r                                           \r    parses database block with Supabase [\u001b[32m✔\u001b[0m]\r\n"]
[51.044376, "o", "  Environment variable substitution\r\n    parses strings with environment variable references [ ]"]
[51.044858, "o", "\r                                                           \r    parses strings with environment variable references [\u001b[32m✔\u001b[0m]\r\n"]
[51.045076, "o", "ConfigValidator\r\n"]
[51.045214, "o", "  AuthConfig validation\r\n"]
[51.045311, "o", "    validates a complete valid configuration [ ]"]
[51.045734, "o", "\r                                                \r    validates a complete valid configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.045868, "o", "    rejects configuration with no providers [ ]"]
[51.046116, "o", "\r                                               \r    rejects configuration with no providers [\u001b[32m✔\u001b[0m]\r\n"]
[51.046314, "o", "    validates Google OAuth provider configuration [ ]"]
[51.046493, "o", "\r                                                     \r    validates Google OAuth provider configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.046553, "o", "    rejects Google OAuth with empty client ID [ ]"]
[51.04667, "o", "\r                                                 \r    rejects Google OAuth with empty client ID [\u001b[32m✔\u001b[0m]\r\n"]
[51.046898, "o", "    rejects Google OAuth with invalid redirect URI [ ]"]
[51.04714, "o", "\r                                                      \r    rejects Google OAuth with invalid redirect URI [\u001b[32m✔\u001b[0m]\r\n"]
[51.047237, "o", "  Password authentication validation\r\n"]
[51.047401, "o", "    validates password configuration with valid settings [ ]"]
[51.047522, "o", "\r                                                            \r    validates password configuration with valid settings [\u001b[32m✔\u001b[0m]\r\n"]
[51.047604, "o", "    rejects password configuration with too short minimum length [ ]"]
[51.047733, "o", "\r                                                                    \r    rejects password configuration with too short minimum length [\u001b[32m✔\u001b[0m]\r\n"]
[51.047829, "o", "  Session configuration validation\r\n"]
[51.047887, "o", "    validates JWT session strategy [ ]"]
[51.048019, "o", "\r                                      \r    validates JWT session strategy [\u001b[32m✔\u001b[0m]\r\n"]
[51.04808, "o", "    rejects JWT with invalid algorithm [ ]"]
[51.048182, "o", "\r                                          \r    rejects JWT with invalid algorithm [\u001b[32m✔\u001b[0m]\r\n"]
[51.048234, "o", "    validates cookie session strategy [ ]"]
[51.048364, "o", "\r                                         \r    validates cookie session strategy [\u001b[32m✔\u001b[0m]\r\n"]
[51.04841, "o", "    rejects cookie with invalid path [ ]"]
[51.048504, "o", "\r                                        \r    rejects cookie with invalid path [\u001b[32m✔\u001b[0m]\r\n"]
[51.048579, "o", "  Database configuration validation\r\n"]
[51.048633, "o", "    validates SQLite database configuration [ ]"]
[51.048745, "o", "\r                                               \r    validates SQLite database configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.048808, "o", "    validates PostgreSQL database configuration [ ]"]
[51.048937, "o", "\r                                                   \r    validates PostgreSQL database configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.049015, "o", "    rejects PostgreSQL with invalid connection string [ ]"]
[51.049078, "o", "\r                                                         \r    rejects PostgreSQL with invalid connection string [\u001b[32m✔\u001b[0m]\r\n"]
[51.049165, "o", "  Duration validation\r\n"]
[51.049241, "o", "    validates positive duration values [ ]"]
[51.049327, "o", "\r                                          \r    validates positive duration values [\u001b[32m✔\u001b[0m]\r\n"]
[51.049404, "o", "    rejects zero duration values [ ]"]
[51.049486, "o", "\r                                    \r    rejects zero duration values [\u001b[32m✔\u001b[0m]\r\n"]
[51.049545, "o", "    rejects negative duration values [ ]"]
[51.049654, "o", "\r                                        \r    rejects negative duration values [\u001b[32m✔\u001b[0m]\r\n"]
[51.049706, "o", "    rejects invalid duration units [ ]"]
[51.049779, "o", "\r                                      \r    rejects invalid duration units [\u001b[32m✔\u001b[0m]\r\n"]
[51.049931, "o", "Environment variable resolution\r\n"]
[51.049999, "o", "  resolves environment variables in provider configuration [ ]"]
[51.050169, "o", "\r                                                              \r  resolves environment variables in provider configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.050292, "o", "Runtime configuration transformation\r\n"]
[51.050348, "o", "  transforms valid AuthConfig to RuntimeConfig [ ]"]
[51.050515, "o", "\r                                                  \r  transforms valid AuthConfig to RuntimeConfig [\u001b[32m✔\u001b[0m]\r\n"]
[51.050649, "o", "  establishes SQLite database connection [ ]"]
[51.050778, "o", "\r                                            \r  establishes SQLite database connection [\u001b[32m✔\u001b[0m]\r\n"]
[51.050857, "o", "  establishes PostgreSQL database connection [ ]"]
[51.050982, "o", "\r                                                \r  establishes PostgreSQL database connection [\u001b[32m✔\u001b[0m]\r\n"]
[51.051044, "o", "  rejects invalid PostgreSQL connection string [ ]"]
[51.05119, "o", "\r                                                  \r  rejects invalid PostgreSQL connection string [\u001b[32m✔\u001b[0m]\r\n"]
[51.051286, "o", "  initializes JWT session manager [ ]"]
[51.05137, "o", "\r                                     \r  initializes JWT session manager [\u001b[32m✔\u001b[0m]\r\n"]
[51.051418, "o", "  initializes cookie session manager [ ]"]
[51.051538, "o", "\r                                        \r  initializes cookie session manager [\u001b[32m✔\u001b[0m]\r\n"]
[51.05159, "o", "  creates HTTP configuration with CORS [ ]"]
[51.051718, "o", "\r                                          \r  creates HTTP configuration with CORS [\u001b[32m✔\u001b[0m]\r\n"]
[51.051781, "o", "  extracts origins from OAuth redirect URIs [ ]"]
[51.051883, "o", "\r                                               \r  extracts origins from OAuth redirect URIs [\u001b[32m✔\u001b[0m]\r\n"]
[51.051931, "o", "Database Adapter\r\n"]
[51.05197, "o", "  Schema Generation\r\n"]
[51.052011, "o", "    generates SQLite schema correctly [ ]"]
[51.052402, "o", "\r                                         \r    generates SQLite schema correctly [\u001b[32m✔\u001b[0m]\r\n"]
[51.052489, "o", "    generates PostgreSQL schema correctly [ ]"]
[51.052848, "o", "\r                                             \r    generates PostgreSQL schema correctly [\u001b[32m✔\u001b[0m]\r\n"]
[51.05292, "o", "    generates Supabase schema correctly [ ]"]
[51.053012, "o", "\r                                           \r    generates Supabase schema correctly [\u001b[32m✔\u001b[0m]\r\n"]
[51.053074, "o", "  Database Connection\r\n"]
[51.053117, "o", "    creates database adapter configuration [ ]"]
[51.053233, "o", "\r                                              \r    creates database adapter configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.053288, "o", "  SQLite Adapter\r\n"]
[51.053338, "o", "    creates and initializes SQLite adapter [ ]"]
[51.072733, "o", "\r                                              \r    creates and initializes SQLite adapter [\u001b[32m✔\u001b[0m]\r\n    handles user CRUD operations [ ]"]
[51.097352, "o", "\r                                    \r    handles user CRUD operations [\u001b[32m✔\u001b[0m]\r\n"]
[51.097647, "o", "    handles session CRUD operations [ ]"]
[51.115553, "o", "\r                                       \r    handles session CRUD operations [\u001b[32m✔\u001b[0m]\r\n"]
[51.115608, "o", "    handles provider operations [ ]"]
[51.131376, "o", "\r                                   \r    handles provider operations [\u001b[32m✔\u001b[0m]\r\n"]
[51.131511, "o", "  Duration Conversion\r\n    converts seconds correctly [ ]"]
[51.131629, "o", "\r                                  \r    converts seconds correctly [\u001b[32m✔\u001b[0m]\r\n"]
[51.131685, "o", "    converts minutes correctly [ ]"]
[51.131718, "o", "\r                                  \r    converts minutes correctly [\u001b[32m✔\u001b[0m]\r\n"]
[51.131839, "o", "    converts hours correctly [ ]"]
[51.13195, "o", "\r                                \r    converts hours correctly [\u001b[32m✔\u001b[0m]\r\n"]
[51.132068, "o", "Database Adapters\r\n  SQLite Adapter\r\n"]
[51.13215, "o", "    creates adapter successfully [ ]"]
[51.133248, "o", "\r                                    \r    creates adapter successfully [\u001b[32m✔\u001b[0m]\r\n    handles basic user operations [ ]"]
[51.134887, "o", "\r                                     \r    handles basic user operations [\u001b[32m✔\u001b[0m]\r\n"]
[51.134968, "o", "  PostgreSQL Adapter\r\n    creates adapter configuration [ ]"]
[51.135092, "o", "\r                                     \r    creates adapter configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.135186, "o", "  Supabase Adapter\r\n"]
[51.135237, "o", "    creates adapter configuration [ ]"]
[51.135368, "o", "\r                                     \r    creates adapter configuration [\u001b[32m✔\u001b[0m]\r\n"]
[51.135442, "o", "  Database Schema Generation\r\n"]
[51.135489, "o", "    generates SQLite schema [ ]"]
[51.135693, "o", "\r                               \r    generates SQLite schema [\u001b[32m✔\u001b[0m]\r\n"]
[51.135728, "o", "    generates PostgreSQL schema [ ]"]
[51.13598, "o", "\r                                   \r    generates PostgreSQL schema [\u001b[32m✔\u001b[0m]\r\n"]
[51.136019, "o", "    generates Supabase schema [ ]"]
[51.13624, "o", "\r                                 \r    generates Supabase schema [\u001b[32m✔\u001b[0m]\r\n"]
[51.136354, "o", "JWT Session Manager\r\n"]
[51.136429, "o", "  creates and validates JWT sessions [ ]"]
[51.137865, "o", "\r                                        \r  creates and validates JWT sessions [\u001b[32m✔\u001b[0m]\r\n"]
[51.138072, "o", "  handles refresh tokens when enabled [ ]"]
[51.138309, "o", "\r                                         \r  handles refresh tokens when enabled [\u001b[32m✔\u001b[0m]\r\n"]
[51.138444, "o", "  rejects invalid JWT tokens [ ]"]
[51.13851, "o", "\r                                \r  rejects invalid JWT tokens [\u001b[32m✔\u001b[0m]\r\n"]
[51.138621, "o", "  handles expired tokens [ ]"]
[51.139751, "o", "\r                            \r  handles expired tokens [\u001b[32m✔\u001b[0m]\r\n"]
[51.139895, "o", "Authentication Endpoints\r\n  POST /login/:provider\r\n    should initiate Google OAuth2 flow [ ]"]
[51.140078, "o", "\r                                          \rLogin request for provider: google\r\n"]
[51.140313, "o", "\u001b[33mPOST\u001b[0m /login/google\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000292699s\r\n"]
[51.140446, "o", "    should initiate Google OAuth2 flow [\u001b[32m✔\u001b[0m]\r\n"]
[51.140485, "o", "    should return 404 for unknown provider [ ]"]
[51.14061, "o", "\r                                              \rLogin request for provider: unknown\r\n"]
[51.140727, "o", "\u001b[33mPOST\u001b[0m /login/unknown\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[31m404 Not Found\u001b[0m 0.000153495s\r\n"]
[51.140793, "o", "    should return 404 for unknown provider [\u001b[32m✔\u001b[0m]\r\n"]
[51.14083, "o", "    should return 400 for password provider (no redirect) [ ]"]
[51.140962, "o", "\r                                                             \rLogin request for provider: password\r\n"]
[51.141068, "o", "\u001b[33mPOST\u001b[0m /login/password\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[31m400 Bad Request\u001b[0m 0.0001419s\r\n"]
[51.14115, "o", "    should return 400 for password provider (no redirect) [\u001b[32m✔\u001b[0m]\r\n"]
[51.141253, "o", "  POST /callback/:provider\r\n"]
[51.141318, "o", "    should handle Google OAuth2 callback with error [ ]"]
[51.141445, "o", "\r                                                       \rCallback for provider: google\r\nOAuth2 error: access_denied\r\n"]
[51.141582, "o", "\u001b[33mPOST\u001b[0m /callback/google\r\n\u001b[37m  Params: \u001b[0m[(\"error\",\"access_denied\")]\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000191894s\r\n"]
[51.141688, "o", "    should handle Google OAuth2 callback with error [\u001b[32m✔\u001b[0m]\r\n"]
[51.141799, "o", "    should return 404 for unknown provider [ ]"]
[51.141864, "o", "\r                                              \rCallback for provider: unknown\r\n"]
[51.141968, "o", "\u001b[33mPOST\u001b[0m /callback/unknown\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[31m404 Not Found\u001b[0m 0.000151595s\r\n"]
[51.142035, "o", "    should return 404 for unknown provider [\u001b[32m✔\u001b[0m]\r\n"]
[51.142074, "o", "    should return 400 for password provider (no callback) [ ]"]
[51.14222, "o", "\r                                                             \rCallback for provider: password\r\n"]
[51.142404, "o", "\u001b[33mPOST\u001b[0m /callback/password\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[31m400 Bad Request\u001b[0m 0.000225091s\r\n"]
[51.142483, "o", "    should return 400 for password provider (no callback) [\u001b[32m✔\u001b[0m]\r\n"]
[51.142537, "o", "  GET /session\r\n"]
[51.142566, "o", "    should return invalid session without Authorization header [ ]"]
[51.142667, "o", "\r                                                                  \rSession validation request\r\n"]
[51.142768, "o", "\u001b[36mGET\u001b[0m /session\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000119884s\r\n"]
[51.142853, "o", "    should return invalid session without Authorization header [\u001b[32m✔\u001b[0m]\r\n"]
[51.142889, "o", "    should return invalid session with malformed Authorization header [ ]"]
[51.143012, "o", "\r                                                                         \rSession validation request\r\n"]
[51.143134, "o", "\u001b[36mGET\u001b[0m /session\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000156835s\r\n"]
[51.143233, "o", "    should return invalid session with malformed Authorization header [\u001b[32m✔\u001b[0m]\r\n"]
[51.143304, "o", "  POST /logout\r\n"]
[51.143361, "o", "    should handle logout without Authorization header [ ]"]
[51.143486, "o", "\r                                                         \rLogout request\r\n"]
[51.143608, "o", "\u001b[33mPOST\u001b[0m /logout\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000154015s\r\n"]
[51.143692, "o", "    should handle logout without Authorization header [\u001b[32m✔\u001b[0m]\r\n"]
[51.143744, "o", "    should handle logout with Authorization header [ ]"]
[51.143919, "o", "\r                                                      \rLogout request\r\n"]
[51.143954, "o", "Logging out session with token: test-token...\r\n"]
[51.144103, "o", "\u001b[33mPOST\u001b[0m /logout\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000219171s\r\n"]
[51.144156, "o", "    should handle logout with Authorization header [\u001b[32m✔\u001b[0m]\r\n"]
[51.144238, "o", "  POST /register\r\n"]
[51.144293, "o", "    should handle registration request [ ]"]
[51.14452, "o", "\r                                          \rRegistration request for: test@example.com\r\n"]
[51.145238, "o", "Registration failed: Password must contain at least one special character\r\n"]
[51.145598, "o", "\u001b[33mPOST\u001b[0m /register\r\n\u001b[37m  Request Body: \u001b[0m{\"email\":\"test@example.com\",\"password\":\"testpassword123\"}\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.00116045s\r\n"]
[51.145727, "o", "    should handle registration request [\u001b[32m✔\u001b[0m]\r\n"]
[51.145912, "o", "  POST /refresh\r\n"]
[51.145982, "o", "    should handle refresh token request [ ]"]
[51.146287, "o", "\r                                           \rToken refresh request\r\n"]
[51.146473, "o", "Tokens refreshed successfully\r\n"]
[51.146613, "o", "\u001b[33mPOST\u001b[0m /refresh\r\n\u001b[37m  Request Body: \u001b[0m{\"refreshToken\":\"test-refresh-token\"}\r\n\u001b[37m  Accept: \u001b[0m\r\n\u001b[37m  Status: \u001b[0m\u001b[32m200 OK\u001b[0m 0.000438149s\r\n"]
[51.146785, "o", "    should handle refresh token request [\u001b[32m✔\u001b[0m]\r\n"]
[51.146925, "o", "POST /register\r\n"]
[51.146997, "o", "  should validate email format [ ]"]
[51.147225, "o", "\r                                  \rRegistration request for: invalid-email\r\n"]
[51.147442, "o", "Registration validation failed: Invalid email format\r\n"]
[51.14765, "o", "  should validate email format [\u001b[32m✔\u001b[0m]\r\n"]
[51.147726, "o", "  should validate password requirements [ ]"]
[51.147943, "o", "\r                                           \rRegistration request for: test@example.com\r\n"]
[51.148262, "o", "Registration failed: Password must be at least 8 characters long\r\n"]
[51.14855, "o", "  should validate password requirements [\u001b[32m✔\u001b[0m]\r\n"]
[51.148638, "o", "  should handle valid registration request [ ]"]
[51.148795, "o", "\r                                              \rRegistration request for: newuser@example.com\r\n"]
[52.209369, "o", "Creating user with email: newuser@example.com\r\nPassword hash: $2y$14$6NFTsRNGy/jgT...\r\nUser registered successfully: newuser@example.com\r\n"]
[52.209673, "o", "  should handle valid registration request [\u001b[32m✔\u001b[0m]\r\n"]
[52.209805, "o", "  should validate password confirmation when provided [ ]"]
[52.210285, "o", "\r                                                         \rRegistration request for: test@example.com\r\n"]
[52.210445, "o", "Registration validation failed: Password confirmation does not match\r\n"]
[52.210557, "o", "  should validate password confirmation when provided [\u001b[32m✔\u001b[0m]\r\n"]
[52.210793, "o", "POST /refresh\r\n  should validate refresh token presence [ ]"]
[52.211165, "o", "\r                                            \rToken refresh request\r\nRefresh validation failed: Refresh token cannot be empty\r\n"]
[52.21137, "o", "  should validate refresh token presence [\u001b[32m✔\u001b[0m]\r\n"]
[52.211457, "o", "  should handle valid refresh token [ ]"]
[52.211533, "o", "\r                                       \rToken refresh request\r\n"]
[52.211678, "o", "Tokens refreshed successfully\r\n"]
[52.211852, "o", "  should handle valid refresh token [\u001b[32m✔\u001b[0m]\r\n"]
[52.211941, "o", "  should reject short refresh tokens [ ]"]
[52.212159, "o", "\r                                        \rToken refresh request\r\n"]
[52.21217, "o", "Invalid refresh token format\r\n"]
[52.212305, "o", "  should reject short refresh tokens [\u001b[32m✔\u001b[0m]\r\n"]
[52.212364, "o", "Security Headers\r\n"]
[52.212419, "o", "  HTTP mode\r\n"]
[52.212473, "o", "    includes basic security headers [ ]"]
[52.212549, "o", "\r                                       \rSession validation request\r\n"]
[52.212703, "o", "    includes basic security headers [\u001b[32m✔\u001b[0m]\r\n"]
[52.212807, "o", "    includes X-Content-Type-Options header [ ]"]
[52.212851, "o", "\r                                              \rSession validation request\r\n"]
[52.213066, "o", "    includes X-Content-Type-Options header [\u001b[32m✔\u001b[0m]\r\n"]
[52.213148, "o", "    includes X-Frame-Options header [ ]"]
[52.213222, "o", "\r                                       \rSession validation request\r\n"]
[52.213409, "o", "    includes X-Frame-Options header [\u001b[32m✔\u001b[0m]\r\n"]
[52.213451, "o", "    includes X-XSS-Protection header [ ]"]
[52.21357, "o", "\r                                        \rSession validation request\r\n"]
[52.213862, "o", "    includes X-XSS-Protection header [\u001b[32m✔\u001b[0m]\r\n"]
[52.213911, "o", "    includes Referrer-Policy header [ ]"]
[52.214016, "o", "\r                                       \rSession validation request\r\n"]
[52.214132, "o", "    includes Referrer-Policy header [\u001b[32m✔\u001b[0m]\r\n"]
[52.214369, "o", "    does not include HSTS header in HTTP mode [ ]"]
[52.214424, "o", "\r                                                 \rSession validation request\r\n"]
[52.214521, "o", "    does not include HSTS header in HTTP mode [\u001b[32m✔\u001b[0m]\r\n"]
[52.214562, "o", "  HTTPS mode\r\n"]
[52.214588, "o", "    includes HSTS header in HTTPS mode [ ]"]
[52.214682, "o", "\r                                          \rSession validation request\r\n"]
[52.214832, "o", "    includes HSTS header in HTTPS mode [\u001b[32m✔\u001b[0m]\r\n"]
[52.214872, "o", "    includes CSP header [ ]"]
[52.214932, "o", "\r                           \rSession validation request\r\n"]
[52.215053, "o", "    includes CSP header [\u001b[32m✔\u001b[0m]\r\n"]
[52.21509, "o", "    includes Permissions-Policy header [ ]"]
[52.21523, "o", "\r                                          \rSession validation request\r\n"]
[52.215421, "o", "    includes Permissions-Policy header [\u001b[32m✔\u001b[0m]\r\n"]
[52.215472, "o", "CORS Headers\r\n"]
[52.215494, "o", "  handles preflight requests [ ]"]
[52.215589, "o", "\r                                \r  handles preflight requests [\u001b[32m✔\u001b[0m]\r\n"]
[52.215622, "o", "  includes CORS headers in responses [ ]"]
[52.21569, "o", "\r                                        \rSession validation request\r\n"]
[52.215809, "o", "  includes CORS headers in responses [\u001b[32m✔\u001b[0m]\r\n"]
[52.215843, "o", "Security Configuration\r\n"]
[52.215881, "o", "  creates default security headers config for HTTP [ ]"]
[52.215962, "o", "\r                                                      \r  creates default security headers config for HTTP [\u001b[32m✔\u001b[0m]\r\n"]
[52.215994, "o", "  creates default security headers config for HTTPS [ ]"]
[52.216058, "o", "\r                                                       \r  creates default security headers config for HTTPS [\u001b[32m✔\u001b[0m]\r\n"]
[52.216131, "o", "HSTS Configuration\r\n"]
[52.216182, "o", "  creates default HSTS config [ ]"]
[52.216295, "o", "\r                                 \r  creates default HSTS config [\u001b[32m✔\u001b[0m]\r\n"]
[52.216424, "o", "CSP Configuration\r\n"]
[52.216466, "o", "  creates default CSP config [ ]\r                                \r  creates default CSP config [\u001b[32m✔\u001b[0m]\r\n"]
[52.216503, "o", "\r\n"]
[52.21655, "o", "Finished in 1.2068 seconds\r\n"]
[52.216573, "o", "\u001b[32m102 examples, 0 failures\u001b[0m\r\n"]
[52.216697, "o", "\u001b[?25h"]
[52.242634, "o", "✅ All tests passed!\r\n"]
[54.244135, "o", "\r\n🎉 Demo Complete!\r\n==================\r\n\r\nKey features demonstrated:\r\n• 📝 DSL configuration with multiple providers\r\n• 🔧 Code generation for TypeScript\r\n• 📦 Complete SDK building\r\n• 🍪 Different session strategies (JWT vs Cookie)\r\n• ✅ Type-safe generated code\r\n• 🧪 Comprehensive testing\r\n\r\nThe Auth DSL makes it easy to:\r\n• Define authentication once in a simple DSL\r\n• Generate type-safe clients for multiple languages\r\n• Support multiple auth providers and strategies\r\n• Build production-ready SDKs and middleware\r\n\r\nThanks for watching! 🚀\r\n"]
